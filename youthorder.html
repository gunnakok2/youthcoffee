<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>‡∏™‡∏±‡πà‡∏á‡∏Å‡∏≤‡πÅ‡∏ü‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; }
    body { font-family: 'Kanit', sans-serif; }
    .coffee-bg { background: linear-gradient(135deg, #8B4513 0%, #D2691E 50%, #F4A460 100%); min-height: 100vh; }
    .order-summary { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
  </style>
</head>
<body class="coffee-bg">
  <div class="min-h-full py-8 px-4">
    <div class="max-w-4xl mx-auto">
      <!-- Header -->
      <header class="text-center mb-8">
        <div class="text-6xl mb-4">‚òï</div>
        <h1 class="text-4xl font-bold text-white mb-2">Coffee House</h1>
        <p class="text-white/80 text-lg">‡∏™‡∏±‡πà‡∏á‡∏Å‡∏≤‡πÅ‡∏ü‡∏™‡∏î‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</p>
      </header>

      <div class="grid lg:grid-cols-2 gap-8">
        <!-- Order Form -->
        <div class="bg-white rounded-2xl shadow-2xl p-8">
          <h2 class="text-2xl font-semibold text-gray-800 mb-6">‡∏™‡∏±‡πà‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h2>

          <form id="coffeeForm" class="space-y-6">
            <!-- Menu -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-3">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)</label>
              <div class="space-y-4">
                <!-- Espresso -->
                <div class="coffee-item cursor-pointer" data-name="‡πÄ‡∏≠‡∏™‡πÄ‡∏õ‡∏£‡∏™‡πÇ‡∏ã‡πà‡πÄ‡∏¢‡πá‡∏ô" data-price="40">
                  <div class="border-2 border-gray-200 rounded-lg p-4 hover:border-amber-500 transition-colors">
                    <div class="flex items-center justify-between">
                      <div class="flex items-center gap-3">
                        <div class="text-2xl">‚òï</div>
                        <div>
                          <div class="font-medium">‡πÄ‡∏≠‡∏™‡πÄ‡∏õ‡∏£‡∏™‡πÇ‡∏ã‡πà‡πÄ‡∏¢‡πá‡∏ô</div>
                          <div class="text-amber-600 text-sm">40 ‡∏ö‡∏≤‡∏ó</div>
                        </div>
                      </div>
                      <div class="quantity-controls hidden flex items-center gap-2">
                        <button type="button" class="decrease-btn w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center text-sm hover:bg-gray-300">-</button>
                        <span class="quantity-display font-semibold min-w-[20px] text-center">1</span>
                        <button type="button" class="increase-btn w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center text-sm hover:bg-gray-300">+</button>
                      </div>
                    </div>
                    <div class="sweetness-section hidden mt-3 pt-3 border-t">
                      <label class="block text-xs font-medium text-gray-600 mb-2">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ß‡∏≤‡∏ô</label>
                      <select class="sweetness-select w-full p-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-amber-500 focus:border-amber-500">
                        <option value="‡πÑ‡∏°‡πà‡∏´‡∏ß‡∏≤‡∏ô">‡πÑ‡∏°‡πà‡∏´‡∏ß‡∏≤‡∏ô</option>
                        <option value="‡∏´‡∏ß‡∏≤‡∏ô‡∏ô‡πâ‡∏≠‡∏¢">‡∏´‡∏ß‡∏≤‡∏ô‡∏ô‡πâ‡∏≠‡∏¢</option>
                        <option value="‡∏´‡∏ß‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥" selected>‡∏´‡∏ß‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥</option>
                        <option value="‡∏´‡∏ß‡∏≤‡∏ô‡∏°‡∏≤‡∏Å">‡∏´‡∏ß‡∏≤‡∏ô‡∏°‡∏≤‡∏Å</option>
                      </select>
                    </div>
                  </div>
                </div>

                <!-- Cappuccino -->
                <div class="coffee-item cursor-pointer" data-name="‡∏Ñ‡∏≤‡∏õ‡∏π‡∏ä‡∏¥‡πÇ‡∏ô‡πà‡πÄ‡∏¢‡πá‡∏ô" data-price="40">
                  <div class="border-2 border-gray-200 rounded-lg p-4 hover:border-amber-500 transition-colors">
                    <div class="flex items-center justify-between">
                      <div class="flex items-center gap-3">
                        <div class="text-2xl">‚òï</div>
                        <div>
                          <div class="font-medium">‡∏Ñ‡∏≤‡∏õ‡∏π‡∏ä‡∏¥‡πÇ‡∏ô‡πà‡πÄ‡∏¢‡πá‡∏ô</div>
                          <div class="text-amber-600 text-sm">40 ‡∏ö‡∏≤‡∏ó</div>
                        </div>
                      </div>
                      <div class="quantity-controls hidden flex items-center gap-2">
                        <button type="button" class="decrease-btn w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center text-sm hover:bg-gray-300">-</button>
                        <span class="quantity-display font-semibold min-w-[20px] text-center">1</span>
                        <button type="button" class="increase-btn w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center text-sm hover:bg-gray-300">+</button>
                      </div>
                    </div>
                    <div class="sweetness-section hidden mt-3 pt-3 border-t">
                      <label class="block text-xs font-medium text-gray-600 mb-2">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ß‡∏≤‡∏ô</label>
                      <select class="sweetness-select w-full p-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-amber-500 focus:border-amber-500">
                        <option value="‡πÑ‡∏°‡πà‡∏´‡∏ß‡∏≤‡∏ô">‡πÑ‡∏°‡πà‡∏´‡∏ß‡∏≤‡∏ô</option>
                        <option value="‡∏´‡∏ß‡∏≤‡∏ô‡∏ô‡πâ‡∏≠‡∏¢">‡∏´‡∏ß‡∏≤‡∏ô‡∏ô‡πâ‡∏≠‡∏¢</option>
                        <option value="‡∏´‡∏ß‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥" selected>‡∏´‡∏ß‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥</option>
                        <option value="‡∏´‡∏ß‡∏≤‡∏ô‡∏°‡∏≤‡∏Å">‡∏´‡∏ß‡∏≤‡∏ô‡∏°‡∏≤‡∏Å</option>
                      </select>
                    </div>
                  </div>
                </div>

                <!-- Latte -->
                <div class="coffee-item cursor-pointer" data-name="‡∏•‡∏≤‡πÄ‡∏ï‡πâ‡πÄ‡∏¢‡πá‡∏ô" data-price="40">
                  <div class="border-2 border-gray-200 rounded-lg p-4 hover:border-amber-500 transition-colors">
                    <div class="flex items-center justify-between">
                      <div class="flex items-center gap-3">
                        <div class="text-2xl">ü•õ</div>
                        <div>
                          <div class="font-medium">‡∏•‡∏≤‡πÄ‡∏ï‡πâ‡πÄ‡∏¢‡πá‡∏ô</div>
                          <div class="text-amber-600 text-sm">40 ‡∏ö‡∏≤‡∏ó</div>
                        </div>
                      </div>
                      <div class="quantity-controls hidden flex items-center gap-2">
                        <button type="button" class="decrease-btn w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center text-sm hover:bg-gray-300">-</button>
                        <span class="quantity-display font-semibold min-w-[20px] text-center">1</span>
                        <button type="button" class="increase-btn w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center text-sm hover:bg-gray-300">+</button>
                      </div>
                    </div>
                    <div class="sweetness-section hidden mt-3 pt-3 border-t">
                      <label class="block text-xs font-medium text-gray-600 mb-2">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ß‡∏≤‡∏ô</label>
                      <select class="sweetness-select w-full p-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-amber-500 focus:border-amber-500">
                        <option value="‡πÑ‡∏°‡πà‡∏´‡∏ß‡∏≤‡∏ô">‡πÑ‡∏°‡πà‡∏´‡∏ß‡∏≤‡∏ô</option>
                        <option value="‡∏´‡∏ß‡∏≤‡∏ô‡∏ô‡πâ‡∏≠‡∏¢">‡∏´‡∏ß‡∏≤‡∏ô‡∏ô‡πâ‡∏≠‡∏¢</option>
                        <option value="‡∏´‡∏ß‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥" selected>‡∏´‡∏ß‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥</option>
                        <option value="‡∏´‡∏ß‡∏≤‡∏ô‡∏°‡∏≤‡∏Å">‡∏´‡∏ß‡∏≤‡∏ô‡∏°‡∏≤‡∏Å</option>
                      </select>
                    </div>
                  </div>
                </div>

                <!-- Americano -->
                <div class="coffee-item cursor-pointer" data-name="‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤‡πÇ‡∏ô‡πà‡πÄ‡∏¢‡πá‡∏ô" data-price="40">
                  <div class="border-2 border-gray-200 rounded-lg p-4 hover:border-amber-500 transition-colors">
                    <div class="flex items-center justify-between">
                      <div class="flex items-center gap-3">
                        <div class="text-2xl">‚òï</div>
                        <div>
                          <div class="font-medium">‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤‡πÇ‡∏ô‡πà‡πÄ‡∏¢‡πá‡∏ô</div>
                          <div class="text-amber-600 text-sm">40 ‡∏ö‡∏≤‡∏ó</div>
                        </div>
                      </div>
                      <div class="quantity-controls hidden flex items-center gap-2">
                        <button type="button" class="decrease-btn w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center text-sm hover:bg-gray-300">-</button>
                        <span class="quantity-display font-semibold min-w-[20px] text-center">1</span>
                        <button type="button" class="increase-btn w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center text-sm hover:bg-gray-300">+</button>
                      </div>
                    </div>
                    <div class="sweetness-section hidden mt-3 pt-3 border-t">
                      <label class="block text-xs font-medium text-gray-600 mb-2">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ß‡∏≤‡∏ô</label>
                      <select class="sweetness-select w-full p-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-amber-500 focus:border-amber-500">
                        <option value="‡πÑ‡∏°‡πà‡∏´‡∏ß‡∏≤‡∏ô">‡πÑ‡∏°‡πà‡∏´‡∏ß‡∏≤‡∏ô</option>
                        <option value="‡∏´‡∏ß‡∏≤‡∏ô‡∏ô‡πâ‡∏≠‡∏¢">‡∏´‡∏ß‡∏≤‡∏ô‡∏ô‡πâ‡∏≠‡∏¢</option>
                        <option value="‡∏´‡∏ß‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥" selected>‡∏´‡∏ß‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥</option>
                        <option value="‡∏´‡∏ß‡∏≤‡∏ô‡∏°‡∏≤‡∏Å">‡∏´‡∏ß‡∏≤‡∏ô‡∏°‡∏≤‡∏Å</option>
                      </select>
                    </div>
                    <div class="bean-section hidden mt-3 pt-3 border-t">
                      <label class="block text-xs font-medium text-gray-600 mb-2">‡πÄ‡∏°‡∏•‡πá‡∏î‡∏Å‡∏≤‡πÅ‡∏ü</label>
                      <select class="bean-select w-full p-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-amber-500 focus:border-amber-500">
                        <option value="‡∏Ñ‡∏±‡πà‡∏ß‡∏Å‡∏•‡∏≤‡∏á" selected>‡∏Ñ‡∏±‡πà‡∏ß‡∏Å‡∏•‡∏≤‡∏á</option>
                        <option value="‡∏Ñ‡∏±‡πà‡∏ß‡πÄ‡∏Ç‡πâ‡∏°">‡∏Ñ‡∏±‡πà‡∏ß‡πÄ‡∏Ç‡πâ‡∏°</option>
                      </select>
                    </div>
                  </div>
                </div>

                <!-- Thai Tea -->
                <div class="coffee-item cursor-pointer" data-name="‡∏ä‡∏≤‡πÑ‡∏ó‡∏¢‡πÄ‡∏¢‡πá‡∏ô (‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà‡∏™‡∏µ)" data-price="40">
                  <div class="border-2 border-gray-200 rounded-lg p-4 hover:border-amber-500 transition-colors">
                    <div class="flex items-center justify-between">
                      <div class="flex items-center gap-3">
                        <div class="text-2xl">üßä</div>
                        <div>
                          <div class="font-medium">‡∏ä‡∏≤‡πÑ‡∏ó‡∏¢‡πÄ‡∏¢‡πá‡∏ô (‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà‡∏™‡∏µ)</div>
                          <div class="text-amber-600 text-sm">40 ‡∏ö‡∏≤‡∏ó</div>
                        </div>
                      </div>
                      <div class="quantity-controls hidden flex items-center gap-2">
                        <button type="button" class="decrease-btn w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center text-sm hover:bg-gray-300">-</button>
                        <span class="quantity-display font-semibold min-w-[20px] text-center">1</span>
                        <button type="button" class="increase-btn w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center text-sm hover:bg-gray-300">+</button>
                      </div>
                    </div>
                    <div class="sweetness-section hidden mt-3 pt-3 border-t">
                      <label class="block text-xs font-medium text-gray-600 mb-2">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ß‡∏≤‡∏ô</label>
                      <select class="sweetness-select w-full p-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-amber-500 focus:border-amber-500">
                        <option value="‡πÑ‡∏°‡πà‡∏´‡∏ß‡∏≤‡∏ô">‡πÑ‡∏°‡πà‡∏´‡∏ß‡∏≤‡∏ô</option>
                        <option value="‡∏´‡∏ß‡∏≤‡∏ô‡∏ô‡πâ‡∏≠‡∏¢">‡∏´‡∏ß‡∏≤‡∏ô‡∏ô‡πâ‡∏≠‡∏¢</option>
                        <option value="‡∏´‡∏ß‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥" selected>‡∏´‡∏ß‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥</option>
                        <option value="‡∏´‡∏ß‡∏≤‡∏ô‡∏°‡∏≤‡∏Å">‡∏´‡∏ß‡∏≤‡∏ô‡∏°‡∏≤‡∏Å</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Customer Info -->
            <div class="border-t pt-6">
              <h3 class="text-lg font-medium text-gray-800 mb-4">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h3>
              <div class="space-y-4">
                <div>
                  <label for="customerName" class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
                  <input type="text" id="customerName" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500"/>
                </div>
                <div>
                  <label for="phone" class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label>
                  <input type="tel" id="phone" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500"/>
                </div>
              </div>
            </div>

            <!-- Notes -->
            <div>
              <label for="notes" class="block text-sm font-medium text-gray-700 mb-2">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏û‡∏¥‡πÄ‡∏®‡∏©</label>
              <textarea id="notes" rows="3" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•, ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡πá‡∏≠‡∏ï..." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500"></textarea>
            </div>

            <!-- Submit -->
            <button type="submit" class="w-full bg-amber-600 text-white py-4 px-6 rounded-lg font-semibold text-lg hover:bg-amber-700 transition-colors shadow-lg">
              ‡∏™‡∏±‡πà‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡πÄ‡∏•‡∏¢! ‚òï
            </button>
          </form>
        </div>

        <!-- Order Summary -->
        <div class="order-summary rounded-2xl shadow-2xl p-8 h-fit">
          <h3 class="text-2xl font-semibold text-gray-800 mb-6">‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h3>
          <div id="orderSummary" class="space-y-4">
            <div class="text-center text-gray-500 py-8">
              <div class="text-4xl mb-4">‚òï</div>
              <p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</p>
            </div>
          </div>
          <div id="totalSection" class="hidden border-t pt-4 mt-6">
            <div class="flex justify-between items-center text-xl font-semibold">
              <span>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°:</span>
              <span id="totalPrice" class="text-amber-600">0 ‡∏ö‡∏≤‡∏ó</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Sweetness Modal -->
  <div id="sweetnessModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
    <div class="bg-white rounded-2xl p-8 max-w-md w-full">
      <h3 class="text-xl font-semibold text-gray-800 mb-4">‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡∏ß</h3>
      <div id="sweetnessModalContent" class="space-y-4 mb-6"></div>
      <div class="flex gap-3">
        <button id="saveSweetness" class="flex-1 bg-amber-600 text-white py-3 px-4 rounded-lg hover:bg-amber-700 transition-colors">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
        <button id="cancelSweetness" class="flex-1 bg-gray-300 text-gray-700 py-3 px-4 rounded-lg hover:bg-gray-400 transition-colors">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
      </div>
    </div>
  </div>

  <!-- Success Modal -->
  <div id="successModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
    <div class="bg-white rounded-2xl p-8 max-w-md w-full text-center">
      <div class="text-6xl mb-4">‚úÖ</div>
      <h3 class="text-2xl font-semibold text-gray-800 mb-4">‡∏™‡∏±‡πà‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</h3>
      <p class="text-gray-600 mb-6">‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ô‡πÑ‡∏°‡πà‡∏ä‡πâ‡∏≤</p>
      <div id="orderNumber" class="bg-amber-100 text-amber-800 px-4 py-2 rounded-lg mb-6 font-semibold"></div>
      <button id="closeModal" class="bg-amber-600 text-white px-6 py-3 rounded-lg hover:bg-amber-700 transition-colors">‡∏õ‡∏¥‡∏î</button>
    </div>
  </div>

  <!-- ===== Script (‡∏Å‡πâ‡∏≠‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏à‡∏ö) ===== -->
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    /** CONFIG */
    const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbzCz4A8onel3PiI0Ur8GtM7CSMkIhs1DILzKGuEvFDKyNpMqykIwd0_j_NxwcPJerEoHA/exec';

    /** STATE */
    let selectedItems = {};
    let orderCounter = 1001;
    let currentSweetnessItem = null;

    /** HELPERS */
    const $ = (sel) => document.querySelector(sel);
    const $$ = (sel) => document.querySelectorAll(sel);

    function explodeItemsToCups(items) {
      const cups = [];
      Object.values(items).forEach(item => {
        const qty = item.quantity || 1;

        const sweetnessList = item.sweetnessList && item.sweetnessList.length === qty
          ? item.sweetnessList
          : Array(qty).fill(item.sweetness || '‡∏´‡∏ß‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥');

        const beanList = (item.name === '‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤‡πÇ‡∏ô‡πà‡πÄ‡∏¢‡πá‡∏ô')
          ? ((item.beanList && item.beanList.length === qty) ? item.beanList : Array(qty).fill(item.bean || '‡∏Ñ‡∏±‡πà‡∏ß‡∏Å‡∏•‡∏≤‡∏á'))
          : Array(qty).fill(item.bean || '');

        for (let i = 0; i < qty; i++) {
          cups.push({
            name: item.name,
            qty: 1,
            pricePerUnit: item.price,
            sweetness: sweetnessList[i],
            bean: beanList[i] || ''
          });
        }
      });
      return cups;
    }

    function calcTotal(items) {
      let total = 0;
      Object.values(items).forEach(it => total += it.price * it.quantity);
      return total;
    }

    function showInlineError(msg, targetSel='.border-t') {
      const existing = $('.error-message');
      if (existing) existing.remove();
      const div = document.createElement('div');
      div.className = 'error-message bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4';
      div.textContent = msg;
      $(targetSel).insertBefore(div, $(targetSel).firstChild);
    }

    function updateOrderSummary() {
      const itemCount = Object.keys(selectedItems).length;
      if (itemCount === 0) {
        $('#orderSummary').innerHTML = `
          <div class="text-center text-gray-500 py-8">
            <div class="text-4xl mb-4">‚òï</div>
            <p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</p>
          </div>`;
        $('#totalSection').classList.add('hidden');
        return;
      }

      let totalPrice = 0;
      let orderHTML = '<div class="space-y-4">';

      Object.values(selectedItems).forEach(item => {
        const itemTotal = item.price * item.quantity;
        totalPrice += itemTotal;

        orderHTML += `
          <div class="border-b pb-3">
            <div class="flex justify-between items-center mb-1">
              <div>
                <span class="font-medium">${item.name}</span>
                <span class="text-sm text-gray-600 ml-2">x${item.quantity}</span>
              </div>
              <span>${itemTotal} ‡∏ö‡∏≤‡∏ó</span>
            </div>
            <div class="text-xs text-gray-600">`;

        if (item.quantity === 1) {
          orderHTML += `<div>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ß‡∏≤‡∏ô: ${item.sweetness}</div>`;
          if (item.bean) orderHTML += `<div>‡πÄ‡∏°‡∏•‡πá‡∏î‡∏Å‡∏≤‡πÅ‡∏ü: ${item.bean}</div>`;
        } else {
          for (let i = 1; i <= item.quantity; i++) {
            const cupSweetness = item.sweetnessList ? item.sweetnessList[i-1] : item.sweetness;
            let cupDetails = `‡πÅ‡∏Å‡πâ‡∏ß‡∏ó‡∏µ‡πà ${i}: ${cupSweetness}`;
            if (item.name === '‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤‡πÇ‡∏ô‡πà‡πÄ‡∏¢‡πá‡∏ô' && item.beanList) {
              const cupBean = item.beanList[i-1];
              cupDetails += `, ${cupBean}`;
            }
            orderHTML += `<div>${cupDetails}</div>`;
          }
        }

        orderHTML += `</div></div>`;
      });

      orderHTML += '</div>';
      $('#orderSummary').innerHTML = orderHTML;
      $('#totalPrice').textContent = `${totalPrice} ‡∏ö‡∏≤‡∏ó`;
      $('#totalSection').classList.remove('hidden');
    }

    /** SELECT ITEMS & CONTROLS */
    $$('.coffee-item').forEach(item => {
      const itemName = item.dataset.name;
      const itemPrice = parseInt(item.dataset.price);
      const itemDiv = item.querySelector('div');
      const quantityControls = item.querySelector('.quantity-controls');
      const quantityDisplay = item.querySelector('.quantity-display');
      const decreaseBtn = item.querySelector('.decrease-btn');
      const increaseBtn = item.querySelector('.increase-btn');
      const sweetnessSection = item.querySelector('.sweetness-section');
      const beanSection = item.querySelector('.bean-section');
      const sweetnessSelect = item.querySelector('.sweetness-select');
      const beanSelect = item.querySelector('.bean-select');

      // Toggle select/deselect
      item.addEventListener('click', (e) => {
        if (e.target.closest('.quantity-controls') || e.target.closest('.sweetness-section') || e.target.closest('.bean-section')) return;

        if (selectedItems[itemName]) {
          delete selectedItems[itemName];
          itemDiv.classList.remove('border-amber-500', 'bg-amber-50');
          itemDiv.classList.add('border-gray-200');
          quantityControls.classList.add('hidden');
          if (sweetnessSection) sweetnessSection.classList.add('hidden');
          if (beanSection) beanSection.classList.add('hidden');
        } else {
          selectedItems[itemName] = {
            name: itemName,
            price: itemPrice,
            quantity: 1,
            sweetness: sweetnessSelect ? sweetnessSelect.value : '‡∏´‡∏ß‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥',
            bean: beanSelect ? beanSelect.value : null
          };
          itemDiv.classList.remove('border-gray-200');
          itemDiv.classList.add('border-amber-500', 'bg-amber-50');
          quantityControls.classList.remove('hidden');
          if (sweetnessSection) sweetnessSection.classList.remove('hidden');
          if (beanSection) beanSection.classList.remove('hidden');
          quantityDisplay.textContent = '1';
        }
        updateOrderSummary();
      });

      // Quantity -
      if (decreaseBtn) decreaseBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        if (selectedItems[itemName] && selectedItems[itemName].quantity > 1) {
          selectedItems[itemName].quantity--;
          if (selectedItems[itemName].sweetnessList && selectedItems[itemName].sweetnessList.length > 1) {
            selectedItems[itemName].sweetnessList.pop();
          }
          if (itemName === '‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤‡πÇ‡∏ô‡πà‡πÄ‡∏¢‡πá‡∏ô' && selectedItems[itemName].beanList && selectedItems[itemName].beanList.length > 1) {
            selectedItems[itemName].beanList.pop();
          }
          quantityDisplay.textContent = selectedItems[itemName].quantity;
          updateOrderSummary();
          showSweetnessModal(itemName);
        }
      });

      // Quantity +
      if (increaseBtn) increaseBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        if (selectedItems[itemName] && selectedItems[itemName].quantity < 10) {
          selectedItems[itemName].quantity++;
          quantityDisplay.textContent = selectedItems[itemName].quantity;
          updateOrderSummary();
          showSweetnessModal(itemName);
        }
      });

      // Default sweetness/bean change
      if (sweetnessSelect) {
        sweetnessSelect.addEventListener('change', (e) => {
          e.stopPropagation();
          if (selectedItems[itemName]) {
            selectedItems[itemName].sweetness = e.target.value;
            updateOrderSummary();
          }
        });
      }
      if (beanSelect) {
        beanSelect.addEventListener('change', (e) => {
          e.stopPropagation();
          if (selectedItems[itemName]) {
            selectedItems[itemName].bean = e.target.value;
            updateOrderSummary();
          }
        });
      }
    });

    /** SWEETNESS MODAL */
    function showSweetnessModal(itemName) {
      if (!selectedItems[itemName] || selectedItems[itemName].quantity <= 1) return;

      currentSweetnessItem = itemName;
      const item = selectedItems[itemName];

      if (!item.sweetnessList) item.sweetnessList = Array(item.quantity).fill(item.sweetness);
      while (item.sweetnessList.length < item.quantity) item.sweetnessList.push(item.sweetness);

      if (itemName === '‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤‡πÇ‡∏ô‡πà‡πÄ‡∏¢‡πá‡∏ô') {
        if (!item.beanList) item.beanList = Array(item.quantity).fill(item.bean || '‡∏Ñ‡∏±‡πà‡∏ß‡∏Å‡∏•‡∏≤‡∏á');
        while (item.beanList.length < item.quantity) item.beanList.push(item.bean || '‡∏Ñ‡∏±‡πà‡∏ß‡∏Å‡∏•‡∏≤‡∏á');
      }

      let modalContent = '';
      for (let i = 1; i <= item.quantity; i++) {
        modalContent += `
          <div class="border-b pb-4 mb-4 last:border-b-0 last:pb-0 last:mb-0">
            <h4 class="font-semibold text-gray-800 mb-3">‡πÅ‡∏Å‡πâ‡∏ß‡∏ó‡∏µ‡πà ${i}</h4>
            <div class="space-y-3">
              <div class="flex items-center justify-between">
                <label class="font-medium">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ß‡∏≤‡∏ô:</label>
                <select class="cup-sweetness p-2 border border-gray-300 rounded focus:ring-2 focus:ring-amber-500" data-cup="${i-1}">
                  <option value="‡πÑ‡∏°‡πà‡∏´‡∏ß‡∏≤‡∏ô" ${item.sweetnessList[i-1] === '‡πÑ‡∏°‡πà‡∏´‡∏ß‡∏≤‡∏ô' ? 'selected' : ''}>‡πÑ‡∏°‡πà‡∏´‡∏ß‡∏≤‡∏ô</option>
                  <option value="‡∏´‡∏ß‡∏≤‡∏ô‡∏ô‡πâ‡∏≠‡∏¢" ${item.sweetnessList[i-1] === '‡∏´‡∏ß‡∏≤‡∏ô‡∏ô‡πâ‡∏≠‡∏¢' ? 'selected' : ''}>‡∏´‡∏ß‡∏≤‡∏ô‡∏ô‡πâ‡∏≠‡∏¢</option>
                  <option value="‡∏´‡∏ß‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥" ${item.sweetnessList[i-1] === '‡∏´‡∏ß‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥' ? 'selected' : ''}>‡∏´‡∏ß‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥</option>
                  <option value="‡∏´‡∏ß‡∏≤‡∏ô‡∏°‡∏≤‡∏Å" ${item.sweetnessList[i-1] === '‡∏´‡∏ß‡∏≤‡∏ô‡∏°‡∏≤‡∏Å' ? 'selected' : ''}>‡∏´‡∏ß‡∏≤‡∏ô‡∏°‡∏≤‡∏Å</option>
                </select>
              </div>
              ${itemName === '‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤‡πÇ‡∏ô‡πà‡πÄ‡∏¢‡πá‡∏ô' ? `
                <div class="flex items-center justify-between">
                  <label class="font-medium">‡πÄ‡∏°‡∏•‡πá‡∏î‡∏Å‡∏≤‡πÅ‡∏ü:</label>
                  <select class="cup-bean p-2 border border-gray-300 rounded focus:ring-2 focus:ring-amber-500" data-cup="${i-1}">
                    <option value="‡∏Ñ‡∏±‡πà‡∏ß‡∏Å‡∏•‡∏≤‡∏á" ${item.beanList[i-1] === '‡∏Ñ‡∏±‡πà‡∏ß‡∏Å‡∏•‡∏≤‡∏á' ? 'selected' : ''}>‡∏Ñ‡∏±‡πà‡∏ß‡∏Å‡∏•‡∏≤‡∏á</option>
                    <option value="‡∏Ñ‡∏±‡πà‡∏ß‡πÄ‡∏Ç‡πâ‡∏°" ${item.beanList[i-1] === '‡∏Ñ‡∏±‡πà‡∏ß‡πÄ‡∏Ç‡πâ‡∏°' ? 'selected' : ''}>‡∏Ñ‡∏±‡πà‡∏ß‡πÄ‡∏Ç‡πâ‡∏°</option>
                  </select>
                </div>` : ''
              }
            </div>
          </div>`;
      }

      $('#sweetnessModalContent').innerHTML = modalContent;
      $('#sweetnessModal').classList.remove('hidden');
    }
    $('#saveSweetness').addEventListener('click', () => {
      if (currentSweetnessItem && selectedItems[currentSweetnessItem]) {
        const sweetnessSelects = $$('.cup-sweetness');
        const sweetnessList = [];
        sweetnessSelects.forEach(select => sweetnessList.push(select.value));
        selectedItems[currentSweetnessItem].sweetnessList = sweetnessList;

        if (currentSweetnessItem === '‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤‡πÇ‡∏ô‡πà‡πÄ‡∏¢‡πá‡∏ô') {
          const beanSelects = $$('.cup-bean');
          const beanList = [];
          beanSelects.forEach(select => beanList.push(select.value));
          selectedItems[currentSweetnessItem].beanList = beanList;
        }
        updateOrderSummary();
      }
      $('#sweetnessModal').classList.add('hidden');
      currentSweetnessItem = null;
    });
    $('#cancelSweetness').addEventListener('click', () => {
      $('#sweetnessModal').classList.add('hidden');
      currentSweetnessItem = null;
    });
    $('#sweetnessModal').addEventListener('click', (e) => {
      if (e.target === e.currentTarget) {
        e.currentTarget.classList.add('hidden');
        currentSweetnessItem = null;
      }
    });

    /** SUCCESS MODAL */
    $('#closeModal').addEventListener('click', () => $('#successModal').classList.add('hidden'));
    $('#successModal').addEventListener('click', (e) => { if (e.target === e.currentTarget) e.currentTarget.classList.add('hidden'); });

    /** SUBMIT ‚Üí Google Apps Script */
    $('#coffeeForm').addEventListener('submit', async (e) => {
      e.preventDefault();

      const customerName = $('#customerName').value.trim();
      const phone = $('#phone').value.trim();
      const notes = $('#notes').value.trim();

      if (!customerName || !phone) {
        showInlineError('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
        return;
      }
      if (Object.keys(selectedItems).length === 0) {
        showInlineError('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£', '#coffeeForm');
        return;
      }

      const payload = {
        customerName,
        phone,
        notes,
        total: calcTotal(selectedItems),
        items: explodeItemsToCups(selectedItems)
      };

      try {
        const res = await fetch(WEB_APP_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });

        console.log('POST status:', res.status);
        let data = {};
        try { data = await res.json(); } catch (e) { console.warn('JSON parse fail', e); }

        if (data && data.ok && data.orderNo) {
          $('#orderNumber').textContent = `‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠: #${data.orderNo}`;
        } else {
          $('#orderNumber').textContent = `‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ (‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß): #${orderCounter}`;
        }

        // Success modal
        $('#successModal').classList.remove('hidden');
        orderCounter++;

        // Reset UI
        $('#coffeeForm').reset();
        selectedItems = {};
        document.querySelectorAll('.coffee-item div').forEach(div => {
          div.classList.remove('border-amber-500', 'bg-amber-50');
          div.classList.add('border-gray-200');
        });
        document.querySelectorAll('.quantity-controls').forEach(c => c.classList.add('hidden'));
        document.querySelectorAll('.sweetness-section').forEach(s => s.classList.add('hidden'));
        document.querySelectorAll('.bean-section').forEach(s => s.classList.add('hidden'));
        const existingError = document.querySelector('.error-message'); if (existingError) existingError.remove();
        updateOrderSummary();

      } catch (err) {
        showInlineError('‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ Google Sheets ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
        console.error('Fetch error:', err);
      }
    });
  });
  </script>
</body>
</html>
